<!DOCTYPE html>
<html lang="en" class="h-full bg-background antialiased dark:bg-background-dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App</title>
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <!-- Use the build output -->
    <link rel="stylesheet" href="./dist/output.css">
    <script>
        // Inline Dark Mode Script to prevent FOUC
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>

    <!-- Import Map for bare specifier resolution without bundler -->
    <script type="importmap">
    {
        "imports": {
            "@stomp/stompjs": "https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/+esm"
        }
    }
    </script>
</head>
<body class="h-full">
    <div id="app" class="h-full w-full">
        <!-- Router injects content here -->
    </div>

    <script type="module">
        // Ensure dist/output.css is generated or dev server is running.
        // In this environment, user likely runs 'npm run dev'.

        import { Router } from './js/router.js';
        import { UI } from './js/ui.js';

        document.addEventListener('DOMContentLoaded', () => {
            UI.init();
            Router.init();
        });
    </script>
</body>
</html>
